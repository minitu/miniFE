/g/g90/choi18/.bashrc: line 15: module: command not found
/g/g90/choi18/.bashrc: line 16: module: command not found
/g/g90/choi18/.bashrc: line 17: module: command not found
Mon Jul  8 13:05:10 PDT 2019
lassen640
Job ID is 363285
gpuroofperf-tool v.0.9.0 (CLI)


------- Running kernel inspection -------
Executing: nvprof
Executing: nvprof --devices all --query-metrics
Retrieving GPU information... Done, took 0.44 seconds
Profiling on GPU: Tesla V100-SXM2-16GB
Invocation: "/g/g90/choi18/miniFE/cuda/src/miniFE.x --num_devices 2 -nx 400 -ny 200 -nz 200"
Executing: jsrun -n1 -a2 -g2 -c40 -r1 nvprof -u ms --demangling off --csv --log-file tmp-simple-363285-%q{OMPI_COMM_WORLD_RANK}.csv /g/g90/choi18/miniFE/cuda/src/miniFE.x --num_devices 2 -nx 400 -ny 200 -nz 200
Running simple profiling... Done, took 4.28 seconds
GPU kernel functions invoked:
1. _ZN6miniFE25matvec_overlap_ell_kernelILNS_12MATVEC_RANGEE0ENS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEEEEvT0_T1_S7_ (Time(%):67.33, 723.6598 msecs, 201 invocations)
2. _ZN6miniFE13waxpby_kernelINS_9PODVectorIdiiEEEEvNT_10ScalarTypeES3_S4_S3_S3_ (Time(%):12.76, 137.1692 msecs, 602 invocations)
3. _ZN6miniFE19element_loop_kernelINS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEENS_7PODMeshIiEEEEvT1_NT_17GlobalOrdinalTypeEPKS9_S8_T0_PKNS8_10ScalarTypeESF_ (Time(%):8.46, 90.9790 msecs, 1 invocations)
4. _ZN6miniFE10dot_kernelINS_9PODVectorIdiiEEEEvT_S3_PNS_10TypeTraitsINS3_10ScalarTypeEE14magnitude_typeE (Time(%):4.34, 46.6838 msecs, 400 invocations)
5. _ZN6miniFE25matvec_overlap_ell_kernelILNS_12MATVEC_RANGEE1ENS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEEEEvT0_T1_S7_ (Time(%):1.16, 12.5180 msecs, 201 invocations)
6. _ZN6miniFE30impose_dirichlet_second_kernelINS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEEEEvNT_10ScalarTypeES5_T0_PNS5_17GlobalOrdinalTypeES8_ (Time(%):1.01, 10.8830 msecs, 2 invocations)
7. _ZN6miniFE32generate_matrix_structure_kernelINS_7PODMeshIiEENS_12PODELLMatrixIdiiEEEEvT_T0_iii (Time(%):0.37, 3.9814 msecs, 1 invocations)
8. _ZN6thrust8cuda_cub4core13_kernel_agentINS0_14__parallel_for16ParallelForAgentINS0_20__uninitialized_fill7functorINS_10device_ptrIdEEdEEmEES9_mEEvT0_T1_ (Time(%):0.23, 2.4369 msecs, 10 invocations)
9. _ZN6miniFE25renumberExternalsAndCountINS_12PODELLMatrixIdiiEEEEvT_NS3_17GlobalOrdinalTypeES4_PS4_ (Time(%):0.21, 2.3020 msecs, 1 invocations)
10. _ZN6miniFE20copyElementsToBufferIdiEEvPT_S2_PT0_i (Time(%):0.17, 1.8218 msecs, 201 invocations)
11. _ZN6miniFE24markExternalColumnsInMapINS_12PODELLMatrixIdiiEENS_13PODColMarkMapIiEEEEvT_T0_ (Time(%):0.13, 1.3850 msecs, 1 invocations)
12. _ZN6miniFE17renumberExternalsINS_12PODELLMatrixIdiiEEEEvT_PNS3_17GlobalOrdinalTypeES4_S5_ (Time(%):0.11, 1.1379 msecs, 1 invocations)
13. _ZN6thrust8cuda_cub4core13_kernel_agentINS0_14__parallel_for16ParallelForAgentINS0_20__uninitialized_fill7functorINS_10device_ptrIiEEiEEmEES9_mEEvT0_T1_ (Time(%):0.11, 1.1369 msecs, 10 invocations)
14. _ZN6miniFE21createExternalMappingINS_12PODELLMatrixIdiiEEEEvT_ (Time(%):0.10, 1.1055 msecs, 1 invocations)
15. _ZN6miniFE23dot_final_reduce_kernelIdEEvPT_ (Time(%):0.08, 0.8777 msecs, 400 invocations)
16. _ZN6miniFE29impose_dirichlet_first_kernelINS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEEEEvNT_10ScalarTypeES5_T0_PNS5_17GlobalOrdinalTypeES8_S8_S8_ (Time(%):0.07, 0.7706 msecs, 2 invocations)
17. _ZN6thrust8cuda_cub3cub30DeviceRadixSortDownsweepKernelINS1_21DeviceRadixSortPolicyIiNS1_8NullTypeEiE9Policy700ELb1ELb0EiS4_iEEvPKT2_PS7_PKT3_PSB_PT4_SF_iiNS1_13GridEvenShareISF_EE (Time(%):0.06, 0.6101 msecs, 3 invocations)
18. _ZN6thrust8cuda_cub3cub30DeviceRadixSortDownsweepKernelINS1_21DeviceRadixSortPolicyIiNS1_8NullTypeEiE9Policy700ELb0ELb0EiS4_iEEvPKT2_PS7_PKT3_PSB_PT4_SF_iiNS1_13GridEvenShareISF_EE (Time(%):0.05, 0.5066 msecs, 2 invocations)
19. _ZN6miniFE17cudaMemset_kernelIdEEvPT_S1_i (Time(%):0.05, 0.4895 msecs, 400 invocations)
20. _ZN6thrust8cuda_cub4core13_kernel_agentINS0_8__unique11UniqueAgentINS_6detail15normal_iteratorINS_10device_ptrIiEEEES9_NS_8equal_toIiEEiPiEES9_S9_SB_SC_iNS0_3cub13ScanTileStateIiLb1EEEmEEvT0_T1_T2_T3_T4_T5_T6_ (Time(%):0.05, 0.4871 msecs, 1 invocations)
21. _ZN6thrust8cuda_cub3cub28DeviceRadixSortUpsweepKernelINS1_21DeviceRadixSortPolicyIiNS1_8NullTypeEiE9Policy700ELb1ELb0EiiEEvPKT2_PT3_SA_iiNS1_13GridEvenShareISA_EE (Time(%):0.02, 0.2479 msecs, 3 invocations)
22. _ZN6thrust8cuda_cub3cub28DeviceRadixSortUpsweepKernelINS1_21DeviceRadixSortPolicyIiNS1_8NullTypeEiE9Policy700ELb0ELb0EiiEEvPKT2_PT3_SA_iiNS1_13GridEvenShareISA_EE (Time(%):0.02, 0.1870 msecs, 2 invocations)
23. _ZN6thrust8cuda_cub4core13_kernel_agentINS0_14__parallel_for16ParallelForAgentINS0_11__transform17unary_transform_fIPiS7_NS5_14no_stencil_tagENS_8identityIiEENS5_21always_true_predicateEEElEESC_lEEvT0_T1_ (Time(%):0.01, 0.1501 msecs, 1 invocations)
24. _ZN6thrust8cuda_cub3cub23RadixSortScanBinsKernelINS1_21DeviceRadixSortPolicyIiNS1_8NullTypeEiE9Policy700EiEEvPT0_i (Time(%):0.01, 0.1102 msecs, 5 invocations)
25. _ZN6thrust8cuda_cub4core13_kernel_agentINS0_14__parallel_for16ParallelForAgentINS0_6__fill7functorINS_6detail15normal_iteratorINS_10device_ptrIdEEEEiEElEESC_lEEvT0_T1_ (Time(%):0.01, 0.0775 msecs, 1 invocations)
26. _ZN6thrust8cuda_cub4core13_kernel_agentINS0_14__parallel_for16ParallelForAgentINS0_6__fill7functorINS_6detail15normal_iteratorINS_10device_ptrIiEEEEiEEmEESC_mEEvT0_T1_ (Time(%):0.01, 0.0682 msecs, 1 invocations)
27. _ZN6thrust8cuda_cub4core13_kernel_agentINS0_8__unique9InitAgentINS0_3cub13ScanTileStateIiLb1EEEPiiEES7_mS8_EEvT0_T1_T2_ (Time(%):0.00, 0.0021 msecs, 1 invocations)
Total percentage: 96.93%
Selected percentage: 88.56% (91.36% of total)
Selected kernels: "_ZN6miniFE25matvec_overlap_ell_kernelILNS_12MATVEC_RANGEE0ENS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEEEEvT0_T1_S7_", "_ZN6miniFE13waxpby_kernelINS_9PODVectorIdiiEEEEvNT_10ScalarTypeES3_S4_S3_S3_", "_ZN6miniFE19element_loop_kernelINS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEENS_7PODMeshIiEEEEvT1_NT_17GlobalOrdinalTypeEPKS9_S8_T0_PKNS8_10ScalarTypeESF_"
Executing: jsrun -n1 -a2 -g2 -c40 -r1 nvprof -u ms --csv --demangling off --log-file tmp-metric-363285-%q{OMPI_COMM_WORLD_RANK}.csv --kernels _ZN6miniFE25matvec_overlap_ell_kernelILNS_12MATVEC_RANGEE0ENS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEEEEvT0_T1_S7_ --metrics l2_read_transactions,l2_write_transactions,dram_read_transactions,dram_write_transactions,flop_count_dp,flop_count_dp_add,flop_count_dp_fma,flop_count_dp_mul,flop_count_sp,flop_count_sp_add,flop_count_sp_fma,flop_count_sp_mul,flop_count_sp_special,inst_executed,inst_fp_32,inst_fp_64,inst_integer,inst_compute_ld_st --kernels _ZN6miniFE13waxpby_kernelINS_9PODVectorIdiiEEEEvNT_10ScalarTypeES3_S4_S3_S3_ --metrics l2_read_transactions,l2_write_transactions,dram_read_transactions,dram_write_transactions,flop_count_dp,flop_count_dp_add,flop_count_dp_fma,flop_count_dp_mul,flop_count_sp,flop_count_sp_add,flop_count_sp_fma,flop_count_sp_mul,flop_count_sp_special,inst_executed,inst_fp_32,inst_fp_64,inst_integer,inst_compute_ld_st --kernels _ZN6miniFE19element_loop_kernelINS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEENS_7PODMeshIiEEEEvT1_NT_17GlobalOrdinalTypeEPKS9_S8_T0_PKNS8_10ScalarTypeESF_ --metrics l2_read_transactions,l2_write_transactions,dram_read_transactions,dram_write_transactions,flop_count_dp,flop_count_dp_add,flop_count_dp_fma,flop_count_dp_mul,flop_count_sp,flop_count_sp_add,flop_count_sp_fma,flop_count_sp_mul,flop_count_sp_special,inst_executed,inst_fp_32,inst_fp_64,inst_integer,inst_compute_ld_st /g/g90/choi18/miniFE/cuda/src/miniFE.x --num_devices 2 -nx 400 -ny 200 -nz 200
Running metric profiling (all, 18 total metrics)... Done, took 1285.78 seconds
Kernel inspection done!
Executing: nvidia-smi -q
Querying GPU driver version (via nvidia-smi)... Done

Kernel parameters saved to  "miniFE-P2.json"

------- Primary kernel parameters -------
Kernel name: _ZN6miniFE25matvec_overlap_ell_kernelILNS_12MATVEC_RANGEE0ENS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEEEEvT0_T1_S7_
	Kernel type:            Floating point (DP)
	Compute operations:     86845220172 ops
	DRAM accesses:          576567856800 bytes
	Computation efficiency: 1.00000
	Instruction mix:
		Computations:    5.13%
		Load/Stores:    15.79%
		Other:          79.08%

Kernel name: _ZN6miniFE13waxpby_kernelINS_9PODVectorIdiiEEEEvNT_10ScalarTypeES3_S4_S3_S3_
	Kernel type:            Floating point (DP)
	Compute operations:     14556540600 ops
	DRAM accesses:          116395784960 bytes
	Computation efficiency: 0.75000
	Instruction mix:
		Computations:    9.52%
		Load/Stores:    14.29%
		Other:          76.19%

Kernel name: _ZN6miniFE19element_loop_kernelINS_12PODELLMatrixIdiiEENS_9PODVectorIdiiEENS_7PODMeshIiEEEEvT1_NT_17GlobalOrdinalTypeEPKS9_S8_T0_PKNS8_10ScalarTypeESF_
	Kernel type:            Floating point (DP)
	Compute operations:     49317408026 ops
	DRAM accesses:          26892255168 bytes
	Computation efficiency: 0.88296
	Instruction mix:
		Computations:   18.82%
		Load/Stores:    10.20%
		Other:          70.98%

Done

------------------------------------------------------------
Sender: LSF System <lsfadmin@lassen710>
Subject: Job 363285: <rf-g2> in cluster <lassen> Done

Job <rf-g2> was submitted from host <lassen708> by user <choi18> in cluster <lassen> at Mon Jul  8 11:30:42 2019
Job was executed on host(s) <1*lassen710>, in queue <pbatch>, as user <choi18> in cluster <lassen> at Mon Jul  8 13:05:06 2019
                            <40*lassen640>
</g/g90/choi18> was used as the home directory.
</g/g90/choi18/miniFE/cuda/src> was used as the working directory.
Started at Mon Jul  8 13:05:06 2019
Terminated at Mon Jul  8 13:27:18 2019
Results reported at Mon Jul  8 13:27:18 2019

Your job looked like:

------------------------------------------------------------
# LSBATCH: User input
#!/bin/bash

#BSUB -nnodes 1
#BSUB -core_isolation 2
#BSUB -W 120
#BSUB -G asccasc
#BSUB -J rf-g2
#BSUB -q pbatch

date; hostname
echo -n 'Job ID is '; echo $LSB_JOBID
cd /g/g90/choi18/gpuroofperf-toolkit/tool

python3 gpuroofperf-cli.py -x "jsrun -n1 -a2 -g2 -c40 -r1" -o miniFE-P2.json /g/g90/choi18/miniFE/cuda/src/miniFE.x --num_devices 2 -nx 400 -ny 200 -nz 200

echo 'Done'

------------------------------------------------------------

Successfully completed.

Resource usage summary:

    CPU time :                                   0.39 sec.
    Max Memory :                                 56 MB
    Average Memory :                             55.73 MB
    Total Requested Memory :                     -
    Delta Memory :                               -
    Max Swap :                                   1421 MB
    Max Processes :                              4
    Max Threads :                                27
    Run time :                                   1332 sec.
    Turnaround time :                            6996 sec.

The output (if any) is above this job summary.

